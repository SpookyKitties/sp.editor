<!DOCTYPE html>
<html>

<head>
  <script>
    const {ipcRenderer, webContents} = require('electron');
    // let searchText;
  ipcRenderer.on('search-close', (event, arg) => {
    console.log(arg) // prints "ping"
    // document.querySelector('body').classList.add('close');
    event.returnValue = 'pong'
  })
  ipcRenderer.on('search-results', (event, arg) => {
    //   alert(arg);
    console.log(arg) // prints "ping"
    // document.querySelector('body').classList.add('close');
    document.getElementById('results').textContent = arg;
    event.returnValue = 'pong'
  })
  ipcRenderer.on('found-in-page', e => {
    //   alert('thcugctuvuy');
      console.log(e.result + ' results');
    });
  ipcRenderer.on('search-open', (event, arg) => {
    console.log(arg) // prints "ping"
    
   document.getElementById('searchBox').value = '';
   document.getElementById('searchBox').focus(); // = '';
   
    event.returnValue = 'pong'
  })
  function clearSearch(){
      
   document.getElementById('searchBox').value = '';
    document.getElementById('results').textContent = 'No Results';
    ipcRenderer.sendSync('search-clear', 'ping');
    
    // document.querySelector('body').classList.add('close');
    // ipcRenderer.sendSync('search-close', 'close');
  }

  function closeSearch() {
    clearSearch();
    
    ipcRenderer.sendSync('search-close', 'close');
  }
  function escape(e)
  {
    if (e.key == 'Escape') {
      closeSearch();
    }
  }
    
  function searchTextChange(direction) {
      if (document.getElementById('searchBox').value.trim().length <= 0) {
        // alert((document.getElementById('searchBox').value.trim().length));
      this.clearSearch();
    } else {
      switch (direction) {
        case 'forward': {
        //   console.log(this.normalizeSearchText());

          ipcRenderer.sendSync('search-forward', document.getElementById('searchBox').value);
          break;
        }
        case 'back': {
          ipcRenderer.sendSync('search-back', document.getElementById('searchBox').value);
          break;
        }
        default: {
          clearSearch();
          break;
        }
      }
      console.log(); // prints "pong"
    }}
      </script>
  <style>
    body{
          margin: 0;
          padding: 0;          
      }
    #results {
        font-size: 15px;
          width: 69px;
          height: 30px;
          padding: 2px 2px 0;
          
          display: flex;
          align-items: center;
    background: inherit;
        }
    .close {
      visibility: hidden;
    }
    body {
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
       background-color: rgb(250, 250, 239);
      /* background: white; */
      overflow: hidden;
    }
    html{
    }
    #searchBar {
        /* border-color: ivory;
        border-left-style: solid;
        border-left-width: 1px;
        border-right-style: solid;
        border-right-width: 1px; */
        
           /* background: lightblue; */
  /* position: absolute; */
  /* bottom: 0px; */
  width: 129;
  height: 35px;
  display: flex;

    background: inherit;
  width: 100%;  
}
button {
    height: 35px;
    width: 35px;
    background: inherit;
        border-style: none;
}
input {
    height: auto;
          /* padding: 2px 2px 0; */
    /* margin-left: 5px; */
    border-style: none;
    background: inherit;
    text-align: center;
  }
  </style>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
    crossorigin="anonymous">
</head>

<body>
  <div id="searchBar">
    <input placeholder="Enter text to search" type="search" name="" id="searchBox" oninput="searchTextChange('forward')"
      onkeyup="escape(e)">
    <div id="results">No Results</div>
    <button onclick="searchTextChange('back')" class="fas fa-chevron-left"></button>
    <button onclick="searchTextChange('forward')" class="fas fa-chevron-right"></button>
    <button onclick="closeSearch()" class="fas fa-window-close"></button>
  </div>

</body>

</html>
