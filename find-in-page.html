<!DOCTYPE html>
<html>

<head>
  <script>
    const {ipcRenderer} = require('electron');
    // let searchText;
  ipcRenderer.on('search-close', (event, arg) => {
    console.log(arg) // prints "ping"
    // document.querySelector('body').classList.add('close');
    event.returnValue = 'pong'
  })
  ipcRenderer.on('search-open', (event, arg) => {
    console.log(arg) // prints "ping"
    
   document.getElementById('searchBox').value = '';
   document.getElementById('searchBox').focus(); // = '';
   
    event.returnValue = 'pong'
  })
  function clearSearch(){
      
   document.getElementById('searchBox').value = '';
    ipcRenderer.sendSync('search-clear', 'ping');
    
    // document.querySelector('body').classList.add('close');
    // ipcRenderer.sendSync('search-close', 'close');
  }

  function closeSearch() {
    clearSearch();
    ipcRenderer.sendSync('search-close', 'close');
  }
  function escape(e)
  {
    if (e.key == 'Escape') {
      closeSearch();
    }
  }
    
  function searchTextChange(direction) {
    //   alert(ipcRenderer);
    if (document.getElementById('searchBox').value.length <= 0) {
      this.clearSearch();
    } else {
      switch (direction) {
        case 'forward': {
        //   console.log(this.normalizeSearchText());

          ipcRenderer.sendSync('search-forward', document.getElementById('searchBox').value);
          break;
        }
        case 'back': {
          ipcRenderer.sendSync('search-back', document.getElementById('searchBox').value);
          break;
        }
        default: {
          clearSearch();
          break;
        }
      }
      console.log(); // prints "pong"
    }}
      </script>
  <style>
    .close {
      visibility: hidden;
    }
    body {
      background: white;
      overflow: hidden;
    }
    #searchBar {
  position: absolute;
  bottom: 0px;
  height: 30px;
  display: flex;

  width: 100%;  
}
input {
    height: 26px;
    margin-left: 5px;

  }
  </style>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
    crossorigin="anonymous">
</head>

<body>
  <div id="searchBar">
    <input type="search" name="" id="searchBox" oninput="searchTextChange('forward')" onkeyup="escape(e)">

    <button onclick="searchTextChange('back')" class="fas fa-chevron-left"></button>
    <button onclick="searchTextChange('forward')" class="fas fa-chevron-right"></button>
    <button onclick="closeSearch()" class="fas fa-window-close"></button>
  </div>

</body>

</html>
