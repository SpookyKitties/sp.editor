<span
  class="verse"
  id="{{ verse.id }}"
  [ngClass]="{
    'highlight-verse': verse.highlight,
    'highlight-context': verse.context
  }"
>
  <ng-container *ngFor="let w of verse.wTags">
    <w
      [class]="filterClassList(w.classList)"
      *ngIf="w.refs"
      (click)="wTagClick(w)"
      [ngClass]="{
        'verse-select-0': !w.selected && w.visibleRefs,
        'verse-select-1': w.selected && w.visibleRefCount === 1,
        'verse-select-2': w.selected && w.visibleRefCount > 1,
        wRef: w.visibleRefs && w.visibleRefCount > 1
      }"
      >{{ w.text }}</w
    ><w [class]="filterClassList(w.classList)" *ngIf="!w.refs">{{ w.text }}</w>
  </ng-container>
</span>
